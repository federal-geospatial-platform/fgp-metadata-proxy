<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>LOOKUP_TABLES_READER_NG &mdash; fme_python_pt_harvester 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="NL_ATTRIBUTE_EXTRACTOR" href="NL_ATTRIBUTE_EXTRACTOR.html" />
    <link rel="prev" title="LOOKUP_TABLES_READER" href="LOOKUP_TABLES_READER.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> fme_python_pt_harvester
            <img src="_static/Canada.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="BC_PROD.html">BC_FGP_BUILDER_PROD</a></li>
<li class="toctree-l1"><a class="reference internal" href="NL_PROD.html">NL_FGP_BUILDER_PROD</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Synchronisation_CKAN.html">Synchronisation_CKAN</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ATTRIBUTE_MANAGER_NG.html">ATTRIBUTE_MANAGER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="ATTRIBUTE_VALUE_TEXT_CLEANER.html">ATTRIBUTE_VALUE_TEXT_CLEANER</a></li>
<li class="toctree-l1"><a class="reference internal" href="AWS_TRANSLATE.html">AWS_TRANSLATE</a></li>
<li class="toctree-l1"><a class="reference internal" href="BC_ATTRIBUTE_FORMATTER.html">BC_ATTRIBUTE_FORMATTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="Catalogue_Reader.html">Catalogue_Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="DCAT_Reader.html">DCAT_Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEFAULT_ATTRIBUTE_MAPPER.html">DEFAULT_ATTRIBUTE_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEFAULT_ATTRIBUTE_MAPPER_NG.html">DEFAULT_ATTRIBUTE_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="DUPLICATE_SERVICE_REMOVER.html">DUPLICATE_SERVICE_REMOVER</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMAIL_FORMAT_TESTER.html">EMAIL_FORMAT_TESTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMPTY_FORMAT_MAPPER.html">EMPTY_FORMAT_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMPTY_FORMAT_MAPPER_NG.html">EMPTY_FORMAT_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="EXTRACT_COLLECTION_START_END_DATE.html">EXTRACT_COLLECTION_START_END_DATE</a></li>
<li class="toctree-l1"><a class="reference internal" href="FORMAT_VALIDATOR.html">FORMAT_VALIDATOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEO_EXTENTS_MAPPER.html">GEO_EXTENTS_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEO_EXTENTS_MAPPER_NG.html">GEO_EXTENTS_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEO_NONE_GEO_SELECTOR.html">GEO_NONE_GEO_SELECTOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOSPATIAL_DATA_VALIDATOR.html">GEOSPATIAL_DATA_VALIDATOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOSPATIAL_DATA_VALIDATOR_NG.html">GEOSPATIAL_DATA_VALIDATOR_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOPORTAL_WEBLINK_ADDER.html">GEOPORTAL_WEBLINK_ADDER</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOPORTAL_WEBLINK_ADDER_NG.html">GEOPORTAL_WEBLINK_ADDER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="GMD_SECTION_DATA_EXTRACTION.html">GMD_SECTION_DATA_EXTRACTION</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON_PUBLISHER.html">JSON_PUBLISHER</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON_PUBLISHER_NG.html">JSON_PUBLISHER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE_FILTER.html">LICENSE_FILTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE_FILTER_NG.html">LICENSE_FILTER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="LOOKUP_TABLES_READER.html">LOOKUP_TABLES_READER</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">LOOKUP_TABLES_READER_NG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#documentation-du-custom-transformer-fme">Documentation du Custom Transformer FME</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-du-code-python-lookup-tables-reader-ng-py">Documentation du code Python LOOKUP_TABLES_READER_NG.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="NL_ATTRIBUTE_EXTRACTOR.html">NL_ATTRIBUTE_EXTRACTOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="NL_CATALOGUE_READER.html">NL_CATALOGUE_READER</a></li>
<li class="toctree-l1"><a class="reference internal" href="NT_CATALOGUE_READER.html">NT_CATALOGUE_READER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MANUAL_GEOSPATIAL_SETTER.html">MANUAL_GEOSPATIAL_SETTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAP_RESOURCE_ATTRIBUTION_REMOVER.html">MAP_RESOURCE_ATTRIBUTION_REMOVER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAP_RESOURCE_ATTRIBUTION_REMOVER_NG.html">MAP_RESOURCE_ATTRIBUTION_REMOVER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_DELTA_FINDER.html">METADATA_DELTA_FINDER</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_FORMAT_MAPPER.html">METADATA_FORMAT_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_FORMAT_MAPPER_NG.html">METADATA_FORMAT_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_VALUE_MAPPER.html">METADATA_VALUE_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_VALUE_MAPPER_NG.html">METADATA_VALUE_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_VALUE_MAPPER_ERROR_MANAGER.html">METADATA_VALUE_MAPPER_ERROR_MANAGER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MORE_INFO_MANAGER.html">MORE_INFO_MANAGER</a></li>
<li class="toctree-l1"><a class="reference internal" href="PYCSW_URL_MAPPER_NG.html">PYCSW_URL_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="ON_CKAN_CONTACT_FORM_EXTRACTOR.html">ON_CKAN_CONTACT_FORM_EXTRACTOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="QC_MISSING_EMAIL_SETTER.html">QC_MISSING_EMAIL_SETTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="REMOVE_BROKEN_URL_WMS_ESRI_REST.html">REMOVE_BROKEN_URL_WMS_ESRI_REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESOURCE_NAME_UNDERSCORE_REMOVER.html">RESOURCE_NAME_UNDERSCORE_REMOVER</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESOURCES_VALIDATOR.html">RESOURCES_VALIDATOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPATIAL_TYPE_MAPPER.html">SPATIAL_TYPE_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPATIAL_TYPE_MAPPER_NG.html">SPATIAL_TYPE_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="XML_PUBLISHER.html">XML_PUBLISHER</a></li>
<li class="toctree-l1"><a class="reference internal" href="XML_PUBLISHER_NG.html">XML_PUBLISHER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="WMS_REST_LANGUAGE_FORMATTER.html">WMS_REST_LANGUAGE_FORMATTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="YT_CONTACTS_MERGER.html">YT_CONTACTS_MERGER</a></li>
<li class="toctree-l1"><a class="reference internal" href="YT_MISSING_ATTRIBUTE_MANAGER.html">YT_MISSING_ATTRIBUTE_MANAGER</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FME_utils.html">FME_utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fme_python_pt_harvester</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>LOOKUP_TABLES_READER_NG</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/LOOKUP_TABLES_READER_NG.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="lookup-tables-reader-ng">
<h1>LOOKUP_TABLES_READER_NG<a class="headerlink" href="#lookup-tables-reader-ng" title="Permalink to this headline"></a></h1>
<div class="section" id="documentation-du-custom-transformer-fme">
<h2>Documentation du Custom Transformer FME<a class="headerlink" href="#documentation-du-custom-transformer-fme" title="Permalink to this headline"></a></h2>
<p><strong>Description </strong></p>
<p>This custom transformer reads and manipulates the content of a lookup table. The lookup table must be a coma separated value (CSV) file.  The manipulation directives are contained in a YAML file located in the same directory as the CSV file. The YAML file must bear the same name that the CSV file. (ex.: Province.csv and Province.yaml). See section below for a description of the YAML file.</p>
<p><strong>Input Ports</strong></p>
<ul>
<li>This custom transformer has no Input Port</li>
</ul>
<p><strong>Output Ports </strong></p>
<ul>
<li>OUTPUT_LOCAL: The content of the lookup table (one record by row in the CSV file)</li>
</ul>
<p><strong>Parameters </strong></p>
<ul>
<li>FEATURE_TYPE: File name of the lookup table without the .csv extension. If this parameter is empty than no CSV file is read and the process continue</li>
<li>CSV_PATH: Name of the root directory containing the lookup table.  The custom transformer will try to find the lookup table in two directories: firstly into CSV_PATH\shared when it is a lookup table shared between PT and secondly in CSV_PATH\PT when the lookup table is specific to a PT</li>
<li>PT: Two letter code of the province or territory to process (ex.: ON, QC, AB...)</li>
<li>CSV_ENCODING: Type of encoding of the lookup tale</li>
</ul>
<p><strong>Content of the YAML file </strong></p>
<p>The YAML file is used by the custom transformer for manipulating (editing, cloning lines, create key/value attributes and validate unicity) the CSV file.  Below is an example of a YAML file.</p>
<pre>
CSV_COLUMNS:
  original_value: [trim, lower, no_null, explode]
  real_value_english: [trim, upper, no_null, explode]
  real_value_french: [no_null_err, explode]
  code_value: [upper, explode]
#
CREATE_KEY_VALUE:
  code_value: original_value
#
NO_DUPLICATE:
  DUP_1: [code_value]
  DUP_2: [original_value, real_value_english]
#
CHECK_DOMAIN
  original_value: [year, yearly]
</pre>

<p><strong>Description of the three sections of a YAML file</strong></p>
<p>The first section CSV_COLUMNS defines the actions to perform on the column of the CSV file.  Following the "CSV_COLUMNS:" you list on separate line the name of the column as defined in the header (first line) of the CSV file (an error is raised if the column name is mispelled); Followed by a colon ":"; followed by the list of actions separated by a coma "," and enclosed between brackets "[]".  Here's the list of possible actions:</p>
<ul>
<li>trim: Remove front and trailing whitespcaes; it also remove extra white spces in the interior of the column value (ex.: "   a   test" ==­&gt; "a test");</li>
<li>lower: Put the column value in lower case;</li>
<li>upper: Put the column value in upper case;</li>
<li>no_null: Check that the column is not empty or null; it terminates execution if not null;
explode: Duplicate the row if the column contains values separated by semicolumn ";".  The line is exploded by the number of values in the column (ex: "QC;ON;MB", will duplicate all the content of the line 2 times, the first line will contain "QC"; the second "ON" and the third "MB".</li>
</ul>
<p>The second section CREATE_KEY_VALUE creates of FME key/value attributes.  Following the "CREATE_KEY_VALUE:" you list on separate line all key: value pair that will create an FME attribute.  The key is the name of the column containing the attribute name to create; followed by a colon ":"; followed by the name of the column containing the value of the attribute;</p>
<p>The third section NO_DUPLICATE defines the column that are used for checking the unicity of one or more columns. Following "NO_DUPLICATE:" you list on separate line the duplication to check.  You write the name of the duplication (name is not important but must be unique); follwed by colon ":"; followed by the list of name of the column to check for unicity separated by a coma and enclosed between bracket. </p>
<p>The fourth section CHECK_DOMAIN defines the domain of values to check for a specific column(s). Following "CHECK_DUPLICATE:" you list on separate line the domain validation to check.  You write the name of the column to check; followed by a colon ":"; followed by the domain values separated by a coma "," and enclosed between brackets "[]". If you want to check for empty value "", you place an extra coma at the end of the list: ex: [A,B,].  Important: do not place extra whitespaces in the list.</p>
</div>
<div class="section" id="documentation-du-code-python-lookup-tables-reader-ng-py">
<h2>Documentation du code Python LOOKUP_TABLES_READER_NG.py<a class="headerlink" href="#documentation-du-code-python-lookup-tables-reader-ng-py" title="Permalink to this headline"></a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#LOOKUP_TABLES_READER_NG.check_file_present" title="LOOKUP_TABLES_READER_NG.check_file_present"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LOOKUP_TABLES_READER_NG.check_file_present</span></code></a>(feature)</p></td>
<td><p>This method checks if a file is present in the shared or the province directory.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#LOOKUP_TABLES_READER_NG.LoadValidateYaml" title="LOOKUP_TABLES_READER_NG.LoadValidateYaml"><code class="xref py py-obj docutils literal notranslate"><span class="pre">LOOKUP_TABLES_READER_NG.LoadValidateYaml</span></code></a>()</p></td>
<td><p>Template Class Interface: When using this class, make sure its name is set as the value of the 'Class to Process Features' transformer parameter.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-LOOKUP_TABLES_READER_NG"></span><dl class="py class">
<dt class="sig sig-object py" id="LOOKUP_TABLES_READER_NG.LoadValidateYaml">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">LOOKUP_TABLES_READER_NG.</span></span><span class="sig-name descname"><span class="pre">LoadValidateYaml</span></span><a class="reference internal" href="_modules/LOOKUP_TABLES_READER_NG.html#LoadValidateYaml"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LOOKUP_TABLES_READER_NG.LoadValidateYaml" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Template Class Interface:
When using this class, make sure its name is set as the value of the ‘Class
to Process Features’ transformer parameter.</p>
<dl class="py method">
<dt class="sig sig-object py" id="LOOKUP_TABLES_READER_NG.LoadValidateYaml.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/LOOKUP_TABLES_READER_NG.html#LoadValidateYaml.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LOOKUP_TABLES_READER_NG.LoadValidateYaml.__init__" title="Permalink to this definition"></a></dt>
<dd><p>Base constructor for class members.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LOOKUP_TABLES_READER_NG.LoadValidateYaml.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/LOOKUP_TABLES_READER_NG.html#LoadValidateYaml.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LOOKUP_TABLES_READER_NG.LoadValidateYaml.close" title="Permalink to this definition"></a></dt>
<dd><p>This method is called once all the FME Features have been processedfrom input().</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="LOOKUP_TABLES_READER_NG.LoadValidateYaml.input">
<span class="sig-name descname"><span class="pre">input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/LOOKUP_TABLES_READER_NG.html#LoadValidateYaml.input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LOOKUP_TABLES_READER_NG.LoadValidateYaml.input" title="Permalink to this definition"></a></dt>
<dd><p>This method is called for each FME Feature entering the
PythonCaller. If knowledge of all input Features is not required for
processing, then the processed Feature can be emitted from this method
through self.pyoutput(). Otherwise, the input FME Feature should be
cached to a list class member and processed in the close() method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>feature</strong> (<em>fmeobjects.FMEFeature</em>) – FME Feature entering the transformer.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="LOOKUP_TABLES_READER_NG.check_file_present">
<span class="sig-prename descclassname"><span class="pre">LOOKUP_TABLES_READER_NG.</span></span><span class="sig-name descname"><span class="pre">check_file_present</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/LOOKUP_TABLES_READER_NG.html#check_file_present"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#LOOKUP_TABLES_READER_NG.check_file_present" title="Permalink to this definition"></a></dt>
<dd><p>This method checks if a file is present in the shared or the province directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>feature</strong> (<em>FmeFeature object</em>) – Feature object to process</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="LOOKUP_TABLES_READER.html" class="btn btn-neutral float-left" title="LOOKUP_TABLES_READER" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="NL_ATTRIBUTE_EXTRACTOR.html" class="btn btn-neutral float-right" title="NL_ATTRIBUTE_EXTRACTOR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, FGP.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>