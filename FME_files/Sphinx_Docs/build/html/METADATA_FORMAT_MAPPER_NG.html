<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>METADATA_FORMAT_MAPPER_NG &mdash; fme_python_pt_harvester 1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="METADATA_VALUE_MAPPER" href="METADATA_VALUE_MAPPER.html" />
    <link rel="prev" title="METADATA_FORMAT_MAPPER" href="METADATA_FORMAT_MAPPER.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> fme_python_pt_harvester
            <img src="_static/Canada.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="BC_PROD.html">BC_FGP_BUILDER_PROD</a></li>
<li class="toctree-l1"><a class="reference internal" href="NL_PROD.html">NL_FGP_BUILDER_PROD</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Synchronisation_CKAN.html">Synchronisation_CKAN</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="ATTRIBUTE_MANAGER_NG.html">ATTRIBUTE_MANAGER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="ATTRIBUTE_VALUE_TEXT_CLEANER.html">ATTRIBUTE_VALUE_TEXT_CLEANER</a></li>
<li class="toctree-l1"><a class="reference internal" href="AWS_TRANSLATE.html">AWS_TRANSLATE</a></li>
<li class="toctree-l1"><a class="reference internal" href="BC_ATTRIBUTE_FORMATTER.html">BC_ATTRIBUTE_FORMATTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="Catalogue_Reader.html">Catalogue_Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="DCAT_Reader.html">DCAT_Reader</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEFAULT_ATTRIBUTE_MAPPER.html">DEFAULT_ATTRIBUTE_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="DEFAULT_ATTRIBUTE_MAPPER_NG.html">DEFAULT_ATTRIBUTE_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="DUPLICATE_SERVICE_REMOVER.html">DUPLICATE_SERVICE_REMOVER</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMAIL_FORMAT_TESTER.html">EMAIL_FORMAT_TESTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMPTY_FORMAT_MAPPER.html">EMPTY_FORMAT_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMPTY_FORMAT_MAPPER_NG.html">EMPTY_FORMAT_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="EXTRACT_COLLECTION_START_END_DATE.html">EXTRACT_COLLECTION_START_END_DATE</a></li>
<li class="toctree-l1"><a class="reference internal" href="FORMAT_VALIDATOR.html">FORMAT_VALIDATOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEO_EXTENTS_MAPPER.html">GEO_EXTENTS_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEO_EXTENTS_MAPPER_NG.html">GEO_EXTENTS_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEO_NONE_GEO_SELECTOR.html">GEO_NONE_GEO_SELECTOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOSPATIAL_DATA_VALIDATOR.html">GEOSPATIAL_DATA_VALIDATOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOSPATIAL_DATA_VALIDATOR_NG.html">GEOSPATIAL_DATA_VALIDATOR_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOPORTAL_WEBLINK_ADDER.html">GEOPORTAL_WEBLINK_ADDER</a></li>
<li class="toctree-l1"><a class="reference internal" href="GEOPORTAL_WEBLINK_ADDER_NG.html">GEOPORTAL_WEBLINK_ADDER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="GMD_SECTION_DATA_EXTRACTION.html">GMD_SECTION_DATA_EXTRACTION</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON_PUBLISHER.html">JSON_PUBLISHER</a></li>
<li class="toctree-l1"><a class="reference internal" href="JSON_PUBLISHER_NG.html">JSON_PUBLISHER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE_FILTER.html">LICENSE_FILTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE_FILTER_NG.html">LICENSE_FILTER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="LOOKUP_TABLES_READER.html">LOOKUP_TABLES_READER</a></li>
<li class="toctree-l1"><a class="reference internal" href="LOOKUP_TABLES_READER_NG.html">LOOKUP_TABLES_READER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="NL_ATTRIBUTE_EXTRACTOR.html">NL_ATTRIBUTE_EXTRACTOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="NL_CATALOGUE_READER.html">NL_CATALOGUE_READER</a></li>
<li class="toctree-l1"><a class="reference internal" href="NT_CATALOGUE_READER.html">NT_CATALOGUE_READER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MANUAL_GEOSPATIAL_SETTER.html">MANUAL_GEOSPATIAL_SETTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAP_RESOURCE_ATTRIBUTION_REMOVER.html">MAP_RESOURCE_ATTRIBUTION_REMOVER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MAP_RESOURCE_ATTRIBUTION_REMOVER_NG.html">MAP_RESOURCE_ATTRIBUTION_REMOVER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_DELTA_FINDER.html">METADATA_DELTA_FINDER</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_FORMAT_MAPPER.html">METADATA_FORMAT_MAPPER</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">METADATA_FORMAT_MAPPER_NG</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#documentation-du-custom-transformer-fme">Documentation du Custom Transformer FME</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documentation-du-code-python-metadata-format-mapper-ng-py">Documentation du code Python METADATA_FORMAT_MAPPER_NG.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_VALUE_MAPPER.html">METADATA_VALUE_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_VALUE_MAPPER_NG.html">METADATA_VALUE_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="METADATA_VALUE_MAPPER_ERROR_MANAGER.html">METADATA_VALUE_MAPPER_ERROR_MANAGER</a></li>
<li class="toctree-l1"><a class="reference internal" href="MORE_INFO_MANAGER.html">MORE_INFO_MANAGER</a></li>
<li class="toctree-l1"><a class="reference internal" href="PYCSW_URL_MAPPER_NG.html">PYCSW_URL_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="ON_CKAN_CONTACT_FORM_EXTRACTOR.html">ON_CKAN_CONTACT_FORM_EXTRACTOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="QC_MISSING_EMAIL_SETTER.html">QC_MISSING_EMAIL_SETTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="REMOVE_BROKEN_URL_WMS_ESRI_REST.html">REMOVE_BROKEN_URL_WMS_ESRI_REST</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESOURCE_NAME_UNDERSCORE_REMOVER.html">RESOURCE_NAME_UNDERSCORE_REMOVER</a></li>
<li class="toctree-l1"><a class="reference internal" href="RESOURCES_VALIDATOR.html">RESOURCES_VALIDATOR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPATIAL_TYPE_MAPPER.html">SPATIAL_TYPE_MAPPER</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPATIAL_TYPE_MAPPER_NG.html">SPATIAL_TYPE_MAPPER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="XML_PUBLISHER.html">XML_PUBLISHER</a></li>
<li class="toctree-l1"><a class="reference internal" href="XML_PUBLISHER_NG.html">XML_PUBLISHER_NG</a></li>
<li class="toctree-l1"><a class="reference internal" href="WMS_REST_LANGUAGE_FORMATTER.html">WMS_REST_LANGUAGE_FORMATTER</a></li>
<li class="toctree-l1"><a class="reference internal" href="YT_CONTACTS_MERGER.html">YT_CONTACTS_MERGER</a></li>
<li class="toctree-l1"><a class="reference internal" href="YT_MISSING_ATTRIBUTE_MANAGER.html">YT_MISSING_ATTRIBUTE_MANAGER</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="FME_utils.html">FME_utils</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">fme_python_pt_harvester</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>METADATA_FORMAT_MAPPER_NG</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/METADATA_FORMAT_MAPPER_NG.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="metadata-format-mapper-ng">
<h1>METADATA_FORMAT_MAPPER_NG<a class="headerlink" href="#metadata-format-mapper-ng" title="Permalink to this headline"></a></h1>
<div class="section" id="documentation-du-custom-transformer-fme">
<h2>Documentation du Custom Transformer FME<a class="headerlink" href="#documentation-du-custom-transformer-fme" title="Permalink to this headline"></a></h2>
<p><strong>Description</strong> </p>
<p>This custom transformer updates (map) data format values to valid data format values and associate the French and English 'Resource Type' attribute to each data format type. It accesses a lookup table to fetch the correct values.</p>
<p>In order to map the data formats of the feature resources{} attribute list, this custom transformer uses a three steps process. The first step maps the data format according to the values contained in the CSV file.  The second step identify the features that were not correctly map and tries to guess the data format according to the url content and/or structure. The third step maps the data format according to the values contained in the CSV file for the features not correctly map in the second pass.</p>
<p><strong>Input Ports</strong> </p>
<p>DATA_INPUT: The metadata record to process</p>
<p><strong>Output Ports </strong></p>
<p>OUTPUT: The output metadata records</p>
<p><strong>Parameters </strong></p>
<ul>
<li>
<p>ATT_TO_MAP: Name of the attribute to map in plain text (ex.: resources{}.format).  Do not use the Open Text Editor &gt; FME Feature Attribute option to select the attribute to map;</p>
</li>
<li>
<p>ERROR_NOT_MAPPED: Flag use to map data items values that cannot be found in the loopup tables. Can take 2 values: Yes: map data values not found; No: Do not map data values not found;</p>
</li>
<li>
<p>REAL_VALUE_REFRESH: Flag use for updating data format attribute values. Can take two value: Yes: update data format; No do not update data format;</p>
</li>
<li>
<p>RES_TYPE_FR_REFRESH: Flag use for updating French resources type. Can take two value: Yes: update French resource type; No do not update French resource type;</p>
</li>
<li>
<p>RES_TYPE_EN_REFRESH: Flag use for updating English resources type. Can take two value: Yes: update English resource type; No do not update English resource type;</p>
</li>
<li>
<p>FEATURE_TYPE: Name of the CSV file to read (without .csv extension);</p>
</li>
<li>
<p>IN_CSV_LOOKUP_TABLES_DIR: Name of the directory path containing the CSV file to read;</p>
</li>
<li>
<p>P-T_ABBR: Two letters abbreviation of the province or the territory.</p>
</li>
</ul>
</div>
<div class="section" id="documentation-du-code-python-metadata-format-mapper-ng-py">
<h2>Documentation du code Python METADATA_FORMAT_MAPPER_NG.py<a class="headerlink" href="#documentation-du-code-python-metadata-format-mapper-ng-py" title="Permalink to this headline"></a></h2>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#METADATA_FORMAT_MAPPER_NG.FeatureProcessor" title="METADATA_FORMAT_MAPPER_NG.FeatureProcessor"><code class="xref py py-obj docutils literal notranslate"><span class="pre">METADATA_FORMAT_MAPPER_NG.FeatureProcessor</span></code></a>()</p></td>
<td><p>This class implement the design pattern: <em>Processing Composite Data</em></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#METADATA_FORMAT_MAPPER_NG.reset_format_no_value" title="METADATA_FORMAT_MAPPER_NG.reset_format_no_value"><code class="xref py py-obj docutils literal notranslate"><span class="pre">METADATA_FORMAT_MAPPER_NG.reset_format_no_value</span></code></a>(feature)</p></td>
<td><p>Reset the resources{}.format list.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-METADATA_FORMAT_MAPPER_NG"></span><dl class="py class">
<dt class="sig sig-object py" id="METADATA_FORMAT_MAPPER_NG.FeatureProcessor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">METADATA_FORMAT_MAPPER_NG.</span></span><span class="sig-name descname"><span class="pre">FeatureProcessor</span></span><a class="reference internal" href="_modules/METADATA_FORMAT_MAPPER_NG.html#FeatureProcessor"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#METADATA_FORMAT_MAPPER_NG.FeatureProcessor" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>This class implement the design pattern: <em>Processing Composite Data</em></p>
<dl class="py method">
<dt class="sig sig-object py" id="METADATA_FORMAT_MAPPER_NG.FeatureProcessor.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/METADATA_FORMAT_MAPPER_NG.html#FeatureProcessor.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#METADATA_FORMAT_MAPPER_NG.FeatureProcessor.__init__" title="Permalink to this definition"></a></dt>
<dd><p>This constructor method created a dictionary and a list to store the features.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="METADATA_FORMAT_MAPPER_NG.FeatureProcessor.close">
<span class="sig-name descname"><span class="pre">close</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/METADATA_FORMAT_MAPPER_NG.html#FeatureProcessor.close"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#METADATA_FORMAT_MAPPER_NG.FeatureProcessor.close" title="Permalink to this definition"></a></dt>
<dd><p>Map the requested attribute.</p>
<p>The following tasks are performed:</p>
<blockquote>
<div><ul class="simple">
<li><p>Extract boolean information on how to map values;</p></li>
<li><p>Extract the value of the attribute or attribute list to map</p></li>
<li><p>Map the values according to which value to map (Feanch value,
English value, code value)</p></li>
<li><p>Append the error to the mapping_errors{}.error attribute list</p></li>
<li><p>Output the FME feature</p></li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="METADATA_FORMAT_MAPPER_NG.FeatureProcessor.input">
<span class="sig-name descname"><span class="pre">input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/METADATA_FORMAT_MAPPER_NG.html#FeatureProcessor.input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#METADATA_FORMAT_MAPPER_NG.FeatureProcessor.input" title="Permalink to this definition"></a></dt>
<dd><p>Load the incoming features.</p>
<p>The features from the CSV (_order=1) are stored in a dictionary according to the unique
format name. The  metadata features (_order=2) or stored in a list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>feature</strong> (<em>FmeFeature object</em>) – Feature object to process</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="METADATA_FORMAT_MAPPER_NG.reset_format_no_value">
<span class="sig-prename descclassname"><span class="pre">METADATA_FORMAT_MAPPER_NG.</span></span><span class="sig-name descname"><span class="pre">reset_format_no_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/METADATA_FORMAT_MAPPER_NG.html#reset_format_no_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#METADATA_FORMAT_MAPPER_NG.reset_format_no_value" title="Permalink to this definition"></a></dt>
<dd><p>Reset the resources{}.format list.</p>
<p>If the the resources{}.format is equal to “no_data” set the value to “”</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>feature</strong> (<em>FMEObject</em>) – Feature object to process</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="METADATA_FORMAT_MAPPER.html" class="btn btn-neutral float-left" title="METADATA_FORMAT_MAPPER" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="METADATA_VALUE_MAPPER.html" class="btn btn-neutral float-right" title="METADATA_VALUE_MAPPER" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, FGP.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>